# === PROMPT SERVICE CONFIGURATION ===
# Example environment variables for the Prompt Service microservice
# Copy this file to .env and customize the values for your environment

# === DATABASE CONFIGURATION ===
# SQLite database URL
# Examples:
#   - sqlite:///./data/prompts.db (relative path)
#   - sqlite:////absolute/path/to/prompts.db (absolute path)
#   - sqlite:///:memory: (in-memory database for testing)
DATABASE_URL=sqlite:///./data/prompts.db

# === VECTOR BACKEND CONFIGURATION ===
# Vector backend to use: "faiss" or "chroma"
VECTOR_BACKEND=faiss

# Path to store vector index files
# For FAISS: Path to .index file
# For ChromaDB: Directory path
VECTOR_INDEX_PATH=./data/vector_index

# Embedding model dimension (default: 384 for all-MiniLM-L6-v2)
EMBEDDING_DIM=384

# === RATE LIMITING & SECURITY ===
# Enable/disable rate limiting
ENABLE_RATE_LIMITING=true

# Rate limit: requests per minute per IP
RATE_LIMIT_PER_MINUTE=60

# Maximum prompt length (characters)
MAX_PROMPT_LENGTH=2000

# Maximum number of results returned by similarity search
MAX_RESULTS=50

# === PERFORMANCE CONFIGURATION ===
# FAISS auto-save interval (number of additions before auto-save)
FAISS_AUTO_SAVE_INTERVAL=100

# Enable batch operations for better performance
ENABLE_BATCH_OPERATIONS=true

# Cache TTL for embeddings (seconds, 0 to disable)
EMBEDDING_CACHE_TTL=3600

# === LOGGING CONFIGURATION ===
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Enable performance monitoring
ENABLE_PERFORMANCE_MONITORING=true

# Log file path (optional, logs to stdout if not set)
# LOG_FILE=./logs/prompt_service.log

# === DEVELOPMENT/TESTING ===
# Environment mode: development, testing, production
ENVIRONMENT=development

# Enable debug mode (more verbose logging, detailed error messages)
DEBUG=false

# Disable authentication for development (not recommended for production)
DISABLE_AUTH=false

# === ADVANCED CONFIGURATION ===
# Thread safety settings
ENABLE_THREAD_SAFETY=true

# Vector normalization method: l2, none
VECTOR_NORMALIZATION=l2

# Similarity metric: cosine, euclidean, dot_product
SIMILARITY_METRIC=cosine

# Model cache directory (for sentence transformers)
# MODEL_CACHE_DIR=./models

# === MONITORING & OBSERVABILITY ===
# Enable metrics collection
ENABLE_METRICS=true

# Metrics export interval (seconds)
METRICS_INTERVAL=60

# Health check timeout (seconds)
HEALTH_CHECK_TIMEOUT=30

# === CORS CONFIGURATION ===
# Allowed origins for CORS (comma-separated)
# CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# === PRODUCTION SETTINGS ===
# These should be configured appropriately for production deployments

# Maximum number of concurrent requests
# MAX_CONCURRENT_REQUESTS=100

# Request timeout (seconds)
# REQUEST_TIMEOUT=30

# Maximum payload size (bytes)
# MAX_PAYLOAD_SIZE=10485760

# SSL/TLS settings
# SSL_KEYFILE=
# SSL_CERTFILE=

# === DOCKER/CONTAINER CONFIGURATION ===
# When running in containers, these paths should be mounted as volumes:
# - DATABASE_URL path directory
# - VECTOR_INDEX_PATH directory  
# - LOG_FILE directory (if specified)
# - MODEL_CACHE_DIR (if specified)

# Example Docker volume mounts:
# docker run -v ./data:/app/data -v ./logs:/app/logs -e DATABASE_URL=sqlite:///./data/prompts.db prompt-service